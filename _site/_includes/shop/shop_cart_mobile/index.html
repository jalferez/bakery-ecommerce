<div id="floating-cart" class="snipcart-checkout hidden">
  ðŸ›’ <span id="cart-count">0</span>
</div>

<style>
  #floating-cart {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #3d2b1f;
    color: #fff;
    padding: 0.8rem 1rem;
    border-radius: 50px;
    cursor: pointer;
    display: none;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    z-index: 9999;
    font-size: 1rem;
  }

  #cart-count {
    background: #ff6347;
    color: #fff;
    font-weight: bold;
    margin-left: 6px;
    border-radius: 50%;
    padding: 0.2rem 0.5rem;
  }

  @media (min-width: 769px) {
    #floating-cart {
      display: none;
    }
  }
</style>

<script>
  document.addEventListener('snipcart.ready', () => {
    const floatingCart = document.getElementById('floating-cart');
    const cartCount = document.getElementById('cart-count');

    // âœ… Update count when item added
    Snipcart.events.on('item.added', () => {
      const count = Snipcart.store.getState().cart.items.count;
      cartCount.textContent = count;
      floatingCart.style.display = 'flex';
    });

    // âœ… Update when item removed
    Snipcart.events.on('item.removed', () => {
      const count = Snipcart.store.getState().cart.items.count;
      cartCount.textContent = count;
      if (count === 0) floatingCart.style.display = 'none';
    });

    // âœ… When clicking the floating cart â†’ open Snipcart
    floatingCart.addEventListener('click', () => {
      Snipcart.api.theme.cart.open();
    });

    // âœ… Hide when cart closes and empty
    Snipcart.events.on('cart.closed', () => {
      const count = Snipcart.store.getState().cart.items.count;
      if (count === 0) floatingCart.style.display = 'none';
    });
  });
</script>
